{"version":3,"sources":["services/server.js","components/Button.js","components/PersonInfo.js","components/Persons.js","components/Input.js","components/PersonForm.js","components/Filter.js","components/Notification.js","components/NotificationErr.js","App.js","index.js"],"names":["server","axios","get","then","response","data","newObject","post","Button","_ref","text","mission","react_default","a","createElement","Fragment","onClick","PersonInfo","props","filter","length","uniqueNames","o","name","toLocaleLowerCase","includes","map","person","key","id","number","components_Button","window","confirm","concat","delete","setOkMessage","setTimeout","unique","Persons","components_PersonInfo","persons","Input","field","content","handle","value","onChange","PersonForm","components_Input","fieldName","contentName","handleName","fieldNumber","contentNumber","handleNumber","Filter","fieldFilter","contentFilter","handleFilter","Notification","message","className","NotificationErr","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setFilter","_useState5","_useState6","newName","setNewName","_useState7","_useState8","newNumber","setNewNumber","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","okMessage","useEffect","serverService","initialPersons","Array","from","Set","uniqArr","find","components_Notification","components_NotificationErr","components_Filter","e","target","components_PersonForm","preventDefault","listObject","Math","floor","random","duplicate","put","test","console","log","catch","error","components_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.058d812c.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create };\n","import React from \"react\";\n\nconst Button = ({ text, mission }) => {\n  return (\n    <>\n      <button onClick={mission}> {text} </button>\n    </>\n  );\n};\n\nexport default Button;\n","import React from \"react\";\nimport axios from \"axios\";\nimport Button from \"./Button\";\n\nconst PersonInfo = props => {\n  if (props.filter.length > 0) {\n    const result = props.uniqueNames.filter(o =>\n      o.name.toLocaleLowerCase().includes(props.filter.toLocaleLowerCase())\n    );\n    return result.map(person => {\n      return (\n        <li key={person.id}>\n          {person.name} {person.number}{\" \"}\n          <Button\n            text=\"Delete\"\n            mission={() => {\n              if (\n                window.confirm(\n                  `Haluatko varmasti poistaa henkilön ${person.name} ?`\n                )\n              ) {\n                axios.delete(\"/persons/\" + person.id);\n                props.setOkMessage(\n                  `Henkilö ${person.name} on poistettu listalta`\n                );\n                setTimeout(() => {\n                  props.setOkMessage(null);\n                }, 4000);\n              }\n            }}\n          />\n        </li>\n      );\n    });\n  } else {\n    return props.unique.map(person => {\n      return (\n        <li key={person.id}>\n          {person.name} {person.number}{\" \"}\n          <Button\n            text=\"Delete\"\n            mission={() => {\n              if (\n                window.confirm(\n                  `Haluatko varmasti poistaa henkilön ${person.name} ?`\n                )\n              ) {\n                axios.delete(\"/persons/\" + person.id);\n                props.setOkMessage(\n                  `Henkilö ${person.name} on poistettu listalta`\n                );\n                setTimeout(() => {\n                  props.setOkMessage(null);\n                }, 4000);\n              }\n            }}\n          />\n        </li>\n      );\n    });\n  }\n};\n\nexport default PersonInfo;\n","import React from \"react\";\nimport PersonInfo from \"./PersonInfo\";\n\nconst Persons = props => {\n  return (\n    <ul>\n      <PersonInfo\n        unique={props.unique}\n        uniqueNames={props.uniqueNames}\n        filter={props.filter}\n        persons={props.persons}\n        setOkMessage={props.setOkMessage}\n      />\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Input = ({ field, content, handle }) => {\n  return (\n    <div>\n      {field} <input value={content} onChange={handle} />\n    </div>\n  );\n};\n\nexport default Input;\n","import React from \"react\";\nimport Input from \"./Input\";\nimport Button from \"./Button\";\n\nconst PersonForm = props => {\n  return (\n    <>\n      <form>\n        <Input\n          field={props.fieldName}\n          content={props.contentName}\n          handle={props.handleName}\n        />\n        <Input\n          field={props.fieldNumber}\n          content={props.contentNumber}\n          handle={props.handleNumber}\n        />\n        <Button text={props.text} mission={props.mission} />\n      </form>\n    </>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\nimport Input from \"./Input\";\n\nconst Filter = props => {\n  return (\n    <>\n      <form>\n        <Input\n          field={props.fieldFilter}\n          content={props.contentFilter}\n          handle={props.handleFilter}\n        />\n      </form>\n    </>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"notification\">{message}</div>;\n};\n\nexport default Notification;\n","import React from \"react\";\n\nconst NotificationErr = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"notificationErr\">{message}</div>;\n};\n\nexport default NotificationErr;\n","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport serverService from \"./services/server\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport NotificationErr from \"./components/NotificationErr\";\nimport { log } from \"util\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [newName, setNewName] = useState(\"lisää nimi\");\n  const [newNumber, setNewNumber] = useState(\"lisää numero\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [okMessage, setOkMessage] = useState(null);\n\n  useEffect(() => {\n    serverService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, [persons]);\n\n  const addInfo = e => {\n    e.preventDefault();\n    const listObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length + Math.floor(Math.random() * 100)\n    };\n    setPersons(persons.concat(listObject));\n    setFilter(\"\");\n    setNewName(\"\");\n    setNewNumber(\"\");\n    if (persons.find(duplicate => duplicate.name === newName)) {\n      if (\n        window.confirm(\n          `Henkilö ${newName} on jo listalla. Korvataanko vanha numero uudella?`\n        )\n      ) {\n        axios.put(\n          \"/persons/\" + persons.find(test => test.name === newName).id,\n          {\n            name: `${newName}`,\n            number: `${newNumber}`\n          }\n        );\n        console.log();\n\n        setOkMessage(`Henkilön ${newName} numero on päivitetty`);\n        setTimeout(() => {\n          setOkMessage(null);\n        }, 4000);\n      }\n      // } else {\n      //   serverService.create(listObject);\n      //   setErrorMessage(`Henkilö ${newName} lisätty listaan`);\n      //   setTimeout(() => {\n      //     setErrorMessage(null);\n      //   }, 4000);\n      // }\n      // Tehtävä 3.20\n    } else {\n      serverService\n        .create(listObject)\n        .then(response => {\n          setPersons(persons.concat(response));\n          setOkMessage(`Henkilö ${newName} lisätty listaan`);\n          setTimeout(() => {\n            setOkMessage(null);\n          }, 4000);\n        })\n        .catch(error => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 4000);\n        });\n    }\n  };\n  const unique = Array.from(new Set(persons.map(uniqArr => uniqArr.name))).map(\n    name => {\n      return persons.find(uniqArr => uniqArr.name === name);\n    }\n  );\n  const uniqueNames = unique.map(person => {\n    return person;\n  });\n\n  const handleFilter = e => {\n    setFilter(e.target.value);\n  };\n\n  const handleNameChange = e => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = e => {\n    setNewNumber(e.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n\n      <Notification message={okMessage} />\n      <NotificationErr message={errorMessage} />\n\n      <Filter\n        text=\"hae nimellä\"\n        fieldFilter=\"haku\"\n        contentFilter={filter}\n        handleFilter={handleFilter}\n      />\n\n      <h2>Lisää uusi</h2>\n\n      <PersonForm\n        fieldName=\"nimi\"\n        contentName={newName}\n        handleName={handleNameChange}\n        fieldNumber=\"numero\"\n        contentNumber={newNumber}\n        handleNumber={handleNumberChange}\n        text=\"lisää\"\n        mission={addInfo}\n      />\n\n      <h2>Numerot</h2>\n      <Persons\n        unique={unique}\n        uniqueNames={uniqueNames}\n        filter={filter}\n        persons={persons}\n        setOkMessage={setOkMessage}\n      />\n    </div>\n  );\n};\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}